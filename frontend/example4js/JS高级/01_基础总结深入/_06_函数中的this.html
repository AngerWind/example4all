<html>
<head>

</head>
<body>
<script type="text/javascript">

    /**
     * 本质上, 任何的函数都是通过obj.xxx()的形式来调用的, 那么在函数内部this就是obj
     *
     * 如果通过xxx()的形式来调用, 那么就等效于window.xxx(), 那么在函数内部this就是xxx
     */
    function Person(color) {
        console.log(this)
        this.color = color;
        this.getColor = function () {
            console.log(this)
            return this.color;
        };
        this.setColor = function (color) {
            console.log(this)
            this.color = color;
        };
    }

    Person("red"); //this是谁? window

    var p = new Person("yello"); //this是谁? p

    p.getColor(); //this是谁? p

    var obj = {};
    p.setColor.call(obj, "black"); //this是谁? obj

    var test = p.setColor;
    test(); //this是谁? window

    function fun1() {
        function fun2() {
            console.log(this);
        }

        fun2(); //this是谁? window
    }
    fun1();

</script>
</body>
</html>